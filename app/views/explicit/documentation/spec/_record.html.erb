<div class="params">
  <% spec.attributes.each do |attribute_name, spec| %>
    <div
      class="params__param"
      x-data="{ expanded: false }"
      x-on:click="expanded = !expanded"
    >
      <div class="params__summary">
        <span class="params__name">
          <%= attribute_name %>
        </span>

        <span class="params__jsontype">
          <%= spec.jsontype %>
        </span>

        <div class="params__summary__expand">
          <span x-show="expanded">&#9650;</span>
          <span x-show="!expanded">&#9660;</span>
        </div>
      </div>

      <% if spec_has_details?(spec) %>
        <div class="params__details" x-show="expanded">
          <% if (description = spec.description) %>
            <div class="params__description">
              <%= description %>
            </div>
          <% end %>

          <div class="params__subspec">
            <%= spec_render spec %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
